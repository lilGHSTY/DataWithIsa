{
  "hooks": {
    "PostToolUse": [
      {
        "name": "Auto-format Python files",
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "if [[ \"${file_path}\" == *.py ]] && command -v autopep8 >/dev/null 2>&1; then cd src && source venv/bin/activate 2>/dev/null && autopep8 --in-place \"${file_path}\" 2>/dev/null; fi",
            "description": "Automatically formats Python files after editing"
          }
        ]
      },
      {
        "name": "Log research activities",
        "matcher": "WebFetch|WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "mkdir -p research && echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Researched: ${url:-${query}}\" >> research/research-log.md",
            "description": "Tracks all web research performed"
          }
        ]
      },
      {
        "name": "Track file modifications",
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"- [$(date '+%Y-%m-%d')] Modified: ${file_path}\" >> docs/PROGRESS.md",
            "description": "Logs all file changes to progress document"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "name": "Prevent accidental secret commits",
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "if echo \"${new_string:-${content}}\" | grep -qE '(sk-[a-zA-Z0-9]{48}|ghp_[a-zA-Z0-9]{36}|api[_-]?key[[:space:]]*[=:][[:space:]]*[\"'\"']?[a-zA-Z0-9]{20,}|password[[:space:]]*[=:][[:space:]]*[\"'\"']?[^\"'\"']{8,})' 2>/dev/null; then echo 'WARNING: Potential secret detected. Use environment variables instead.'; exit 1; fi",
            "description": "Blocks writes containing potential secrets"
          }
        ]
      },
      {
        "name": "Protect critical files",
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "if [[ \"${file_path}\" == *\".env\" ]] || [[ \"${file_path}\" == */hooks.json ]]; then echo 'WARNING: Attempting to modify protected file. This action has been blocked.'; exit 1; fi",
            "description": "Prevents modification of .env and hooks.json files"
          }
        ]
      }
    ],
    "Stop": [
      {
        "name": "Session summary",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"\\n=== Session ended at $(date '+%Y-%m-%d %H:%M:%S') ===\\n\" >> docs/PROGRESS.md",
            "description": "Marks the end of each Claude Code session"
          }
        ]
      }
    ]
  }
}